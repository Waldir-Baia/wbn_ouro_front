<div class="app-shell" [class.sidebar-closed]="!sidebarOpen()">
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="brand">
        <span class="brand-name">WBN Ouro</span>
      </div>
      <button
        class="hamburger"
        type="button"
        aria-label="Alternar menu"
        [attr.aria-expanded]="sidebarOpen()"
        aria-controls="sidebarMenu"
        (click)="toggleSidebar()"
      >
        <svg class="hamburger-icon" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
          <path d="M4 7h16M4 12h16M4 17h10" />
        </svg>
      </button>
    </div>

    <div class="menu-scroll-area">
      <nav class="menu" id="sidebarMenu">
        @if (menuSections.length) {
          @for (section of menuSections; track section.title) {
            @let sectionId = section.title.toLowerCase().replace(/\\s+/g, '-');
            <section
              class="menu-section"
              [class.menu-section--expanded]="isSectionExpanded(section.title)"
            >
              <button
                class="menu-section-toggle"
                type="button"
                (click)="toggleSection(section.title)"
                [attr.aria-expanded]="isSectionExpanded(section.title)"
                [attr.aria-controls]="sectionId + '-items'"
              >
                <span>{{ section.title }}</span>
                <svg
                  class="chevron-icon"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                  [class.expanded]="isSectionExpanded(section.title)"
                >
                  <path d="M6 9l6 6 6-6" />
                </svg>
              </button>
              @if (isSectionExpanded(section.title)) {
                <ul [id]="sectionId + '-items'">
                  @for (item of section.items; track item.label) {
                    <li>
                      <button
                        type="button"
                        [routerLink]="item.route"
                        routerLinkActive="active"
                      >
                        {{ item.label }}
                      </button>
                    </li>
                  }
                </ul>
              }
            </section>
          }
        } @else {
          <p class="menu-empty">Nenhuma opção encontrada.</p>
        }
      </nav>
    </div>
  </aside>

  <main class="content">
    <header>
      <h1>Bem-vindo ao painel de serviços</h1>
      <p>Selecione uma das opções no menu lateral para começar.</p>
    </header>
    <section class="workspace">
      <router-outlet />
    </section>
  </main>
</div>
